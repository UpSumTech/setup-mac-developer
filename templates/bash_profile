#!/usr/bin/env bash

# If not running interactively, don't do anything
case $- in
  *i*) ;;
    *) return;;
esac


####################################### GLOBAL VARS #######################################
export VISUAL=vim
export EDITOR=$VISUAL
export GIT_EDITOR=$EDITOR
export HISTSIZE=50000
export HISTFILESIZE=$HISTSIZE
shopt -s histappend
export BASH_IT="$HOME/.bash_it"
export BASH_IT_THEME='powerline'
unset MAILCHECK
export IRC_CLIENT='irssi'
export SCM_CHECK=true
export THEME_SHOW_CLOCK_CHAR=false
export POWERLINE_PROMPT="scm aws_profile k8s_context k8s_namespace cwd"
export POWERLINE_COMPACT=1


########## Not generated by bash-it #############
[ -f ~/.bashrc ] && . ~/.bashrc



####################################### LOAD BASH_IT #######################################
if [[ -d "$BASH_IT" ]]; then
  source "$BASH_IT/bash_it.sh"
fi



#################################### COMPLETIONS ###################################
if command -v pipenv >/dev/null 2>&1; then
  eval "$(_PIPENV_COMPLETE=bash_source pipenv)"
fi

. "$(brew --prefix)/etc/profile.d/bash_completion.sh"
. "$(brew --prefix bash-completion@2)/share/bash-completion/bash_completion"

# Load bash completions for homebrew packages
for completion_file in $(brew --prefix)/etc/bash_completion.d/*; do
  if [[ -f "$completion_file" ]]; then
    . "$completion_file"
  fi
done

# Load bash completions for homebrew packages
for completion_file in $(brew --prefix)/opt/*/etc/bash_completion.d/*; do
  if [[ -f "$completion_file" ]]; then
    . "$completion_file"
  fi
done

# kubectl completion functionality
if command -v kubectl >/dev/null 2>&1 && test ! -f "$HOME/.kubectl-completion"; then
  kubectl completion bash > $HOME/.kubectl-completion
fi
if [[ -f "$HOME/.kubectl-completion" ]]; then
  . "$HOME/.kubectl-completion"
  type -t __ltrim_colon_completions | grep -i function >/dev/null 2>&1 || __ltrim_colon_completions() { :; }
fi
